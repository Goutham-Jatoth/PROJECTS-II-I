import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import java.io.*;
import java.net.*;
import org.json.JSONObject;
import com.itextpdf.text.*;
import com.itextpdf.text.pdf.PdfWriter;

public class SmartTravelPlanner extends JFrame {

    private JTextField nameField, sourceField, destField, budgetField, daysField;
    private JComboBox<String> seatBox;
    private JTextArea output;
    private JButton planBtn, bookBtn, mapBtn;

    private ArrayList<String> availableSeats = new ArrayList<>(
        Arrays.asList("1A","1B","1C","2A","2B","2C","3A","3B","3C")
    );

    // Replace with your free OpenWeatherMap API Key
    private final String WEATHER_API_KEY = "YOUR_OPENWEATHERMAP_API_KEY";

    public SmartTravelPlanner() {
        setTitle("ğŸŒ Smart Travel Planner");
        setSize(750, 650);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        JPanel inputPanel = new JPanel(new GridLayout(7, 2, 10, 10));

        inputPanel.add(new JLabel("ğŸ‘¤ Name:"));
        nameField = new JTextField();
        inputPanel.add(nameField);

        inputPanel.add(new JLabel("ğŸ›« Source City:"));
        sourceField = new JTextField();
        inputPanel.add(sourceField);

        inputPanel.add(new JLabel("ğŸ›¬ Destination City:"));
        destField = new JTextField();
        inputPanel.add(destField);

        inputPanel.add(new JLabel("ğŸ’° Budget (INR):"));
        budgetField = new JTextField();
        inputPanel.add(budgetField);

        inputPanel.add(new JLabel("ğŸ“… Days of Stay:"));
        daysField = new JTextField();
        inputPanel.add(daysField);

        inputPanel.add(new JLabel("âœˆï¸ Select Flight Seat:"));
        seatBox = new JComboBox<>(availableSeats.toArray(new String[0]));
        inputPanel.add(seatBox);

        planBtn = new JButton("ğŸ—º Plan Trip");
        bookBtn = new JButton("ğŸŸ Book Flight");
        mapBtn = new JButton("ğŸ“ Show Map");
        inputPanel.add(planBtn);
        inputPanel.add(bookBtn);

        output = new JTextArea();
        output.setEditable(false);
        output.setBorder(BorderFactory.createLineBorder(Color.BLACK));

        add(inputPanel, BorderLayout.NORTH);
        add(new JScrollPane(output), BorderLayout.CENTER);
        add(mapBtn, BorderLayout.SOUTH);

        // Trip planning
        planBtn.addActionListener(e -> planTrip());

        // Flight booking
        bookBtn.addActionListener(e -> bookFlight());

        // Google Maps
        mapBtn.addActionListener(e -> openGoogleMaps());
    }

    // âœ… Live Weather API (OpenWeatherMap)
    private String getWeather(String city) {
        try {
            String urlString = "https://api.openweathermap.org/data/2.5/weather?q=" 
                                + URLEncoder.encode(city, "UTF-8") 
                                + "&appid=" + WEATHER_API_KEY + "&units=metric";
            URL url = new URL(urlString);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setRequestMethod("GET");

            BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            StringBuilder json = new StringBuilder();
            String line;
            while ((line = reader.readLine()) != null) json.append(line);
            reader.close();

            JSONObject obj = new JSONObject(json.toString());
            String condition = obj.getJSONArray("weather").getJSONObject(0).getString("main");
            double temp = obj.getJSONObject("main").getDouble("temp");

            return condition + ", " + temp + "Â°C";

        } catch (Exception e) {
            return "âš ï¸ Weather API Error: " + e.getMessage();
        }
    }

    // Dummy Hotel Suggestions
    private String[] getHotels(String city) {
        return new String[] {
            "ğŸ¨ " + city + " Palace Hotel",
            "ğŸ¨ " + city + " Grand Inn",
            "ğŸ¨ " + city + " Budget Stay"
        };
    }

    // âœ… Plan Trip
    private void planTrip() {
        String name = nameField.getText().trim();
        String src = sourceField.getText().trim();
        String dest = destField.getText().trim();
        String budget = budgetField.getText().trim();
        String days = daysField.getText().trim();

        if(name.isEmpty() || src.isEmpty() || dest.isEmpty() || budget.isEmpty() || days.isEmpty()) {
            output.setText("âš ï¸ Please fill all fields!");
            return;
        }

        String weather = getWeather(dest);
        String[] hotels = getHotels(dest);

        output.setText("ğŸŒ Travel Plan for " + name + "\n");
        output.append("From: " + src + " â†’ To: " + dest + "\n");
        output.append("Budget: â‚¹" + budget + " | Stay: " + days + " days\n\n");

        output.append("ğŸŒ¤ Weather in " + dest + ": " + weather + "\n\n");

        output.append("ğŸ¨ Suggested Hotels:\n");
        for(String h : hotels) output.append("  - " + h + "\n");

        output.append("\nâœ… Trip planned successfully!\n");
    }

    // âœ… Flight booking
    private void bookFlight() {
        String name = nameField.getText().trim();
        String src = sourceField.getText().trim();
        String dest = destField.getText().trim();
        String seat = (String) seatBox.getSelectedItem();

        if(name.isEmpty() || src.isEmpty() || dest.isEmpty()) {
            output.setText("âš ï¸ Enter Name, Source, and Destination first!");
            return;
        }

        String ticketDetails = "ğŸŸ Flight Ticket Generated!\n\n"
                + "Passenger: " + name + "\n"
                + "From: " + src + "\n"
                + "To: " + dest + "\n"
                + "Seat: " + seat + "\n"
                + "Status: âœ… Confirmed";

        output.setText(ticketDetails);

        availableSeats.remove(seat);
        seatBox.removeItem(seat);

        generatePDF(name, src, dest, seat);
    }

    // âœ… PDF Ticket
    private void generatePDF(String name, String src, String dest, String seat) {
        try {
            Document document = new Document();
            String fileName = "FlightTicket_" + name + ".pdf";
            PdfWriter.getInstance(document, new FileOutputStream(fileName));

            document.open();
            document.add(new Paragraph("âœˆï¸ SMART TRAVEL PLANNER - FLIGHT TICKET"));
            document.add(new Paragraph("---------------------------------------------------"));
            document.add(new Paragraph("Passenger Name: " + name));
            document.add(new Paragraph("Source: " + src));
            document.add(new Paragraph("Destination: " + dest));
            document.add(new Paragraph("Seat: " + seat));
            document.add(new Paragraph("Status: CONFIRMED âœ…"));
            document.add(new Paragraph("---------------------------------------------------"));
            document.add(new Paragraph("Generated on: " + new Date()));
            document.close();

            output.append("\n\nğŸ“„ Ticket saved as: " + fileName);
        } catch (Exception e) {
            output.append("\nâš ï¸ PDF Generation Error: " + e.getMessage());
        }
    }

    // âœ… Google Maps Route
    private void openGoogleMaps() {
        try {
            String src = sourceField.getText().trim();
            String dest = destField.getText().trim();
            if(src.isEmpty() || dest.isEmpty()) {
                output.setText("âš ï¸ Enter Source and Destination first!");
                return;
            }
            String url = "https://www.google.com/maps/dir/" 
                        + URLEncoder.encode(src, "UTF-8") 
                        + "/" + URLEncoder.encode(dest, "UTF-8");
            Desktop.getDesktop().browse(new URI(url));
        } catch (Exception e) {
            output.append("\nâš ï¸ Google Maps Error: " + e.getMessage());
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> new SmartTravelPlanner().setVisible(true));
    }
}


































ğŸ“Œ Project Structure
SmartTravelPlanner/
 â”œâ”€â”€ src/
 â”‚    â””â”€â”€ SmartTravelPlanner.java   # Main GUI App
 â”œâ”€â”€ lib/
 â”‚    â”œâ”€â”€ itextpdf-5.5.13.2.jar     # PDF generation
 â”‚    â”œâ”€â”€ json-20231018.jar         # JSON parsing
 â””â”€â”€ README.md
